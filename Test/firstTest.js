"use strict";
///<reference types="../FudgeCore/FudgeCore.js"/>
var ExampleSceneForest;
///<reference types="../FudgeCore/FudgeCore.js"/>
(function (ExampleSceneForest) {
    var ƒ = FudgeCore; // Alt + 159
    window.addEventListener("DOMContentLoaded", init);
    let node;
    let camera;
    let viewPort;
    function init() {
        ƒ.RenderManager.initialize();
        createForest();
        viewPort.draw();
        viewPort.showSceneGraph();
        addEventListener("keydown", handleKeyDown);
    }
    function createForest() {
        let forest = new ƒ.Node("Forest");
        let colorLeaves = new ƒ.Color(0.2, 0.6, 0.3, 1);
        let colorNeedles = new ƒ.Color(0.1, 0.5, 0.3, 1);
        let colorTreeTrunk = new ƒ.Color(0.5, 0.3, 0, 1);
        let colorMushroomCapBrown = new ƒ.Color(0.6, 0.4, 0, 1);
        let colorMushroomCapRed = new ƒ.Color(0.5, 0, 0, 1);
        let colorMushroomTrunk = new ƒ.Color(0.9, 0.8, 0.7, 1);
        let colorGround = new ƒ.Color(0.3, 0.6, 0.5, 1);
        // let groundPosition: ƒ.Matrix4x4 = new ƒ.Matrix4x4();
        // groundPosition.translateY(2);
        // console.log(groundPosition);
        let ground = createCompleteMeshNode("Ground", new ƒ.Material("Ground", ƒ.ShaderUniColor, new ƒ.CoatColored(colorGround)), new ƒ.MeshCube());
        let cmpGroundMesh = ground.getComponent(ƒ.ComponentMesh);
        cmpGroundMesh.pivot.scale(new ƒ.Vector3(8.5, 0.05, 8.5));
        node = ground;
        createViewport();
        // let cmpCamera: ƒ.ComponentTransform = camera.getComponent(ƒ.ComponentTransform);
        let cmpTransformCamera = camera.cmpTransform;
        cmpTransformCamera.local.translateY(2);
        // cmpCamera.local.translateZ(-2);
        // cmpTransformCamera.local.rotateX(8);
        // cmpCamera.local.rotateZ(2.8);
        node.addChild(camera);
        for (let i = 0; i < 5; i++) {
            let plusOrMinus = Math.random() < 0.5 ? -1 : 1;
            // console.log("create Broadleaf " + i);
            let broadleafe = createBroadleaf("BreadLeaf" + i, colorTreeTrunk, colorLeaves, new ƒ.Vector3(Math.random() * 4 * plusOrMinus, 0.2, Math.random() * 4 * plusOrMinus), new ƒ.Vector3(0.2, 0.5, 0.2));
            forest.appendChild(broadleafe);
        }
        for (let i = 0; i < 7; i++) {
            let plusOrMinus = Math.random() < 0.5 ? -1 : 1;
            // console.log("create Conifer " + i);
            let conifer = createConifer("Conifer" + i, colorTreeTrunk, colorNeedles, new ƒ.Vector3(Math.random() * 3 * plusOrMinus, 0.2, Math.random() * 3 * plusOrMinus), new ƒ.Vector3(0.2, 0.5, 0.2));
            forest.appendChild(conifer);
        }
        for (let i = 0; i < 6; i++) {
            let plusOrMinus = Math.random() < 0.5 ? -1 : 1;
            // console.log("create MushroomRed " + i);
            let mushroomRed = createMushroom("Mushroom" + i, colorMushroomTrunk, colorMushroomCapRed, new ƒ.Vector3(Math.random() * 2 * plusOrMinus, 0.2, Math.random() * 2 * plusOrMinus), new ƒ.Vector3(0.1, 0.3, 0.1));
            let mushroomBrown = createMushroom("Mushroom" + i, colorMushroomTrunk, colorMushroomCapBrown, new ƒ.Vector3(Math.random() * 2 * plusOrMinus, 0.2, Math.random() * 2 * plusOrMinus), new ƒ.Vector3(0.15, 0.4, 0.15));
            forest.appendChild(mushroomRed);
            forest.appendChild(mushroomBrown);
        }
        node.appendChild(forest);
    }
    function createCompleteMeshNode(_name, _material, _mesh, _position) {
        let node = new ƒ.Node(_name);
        let cmpMesh = new ƒ.ComponentMesh(_mesh);
        let cmpMaterial = new ƒ.ComponentMaterial(_material);
        let cmpTransform;
        if (_position) {
            cmpTransform = new ƒ.ComponentTransform(_position);
        }
        else {
            cmpTransform = new ƒ.ComponentTransform();
        }
        node.addComponent(cmpMesh);
        node.addComponent(cmpMaterial);
        node.addComponent(cmpTransform);
        return node;
    }
    function createViewport(_canvas = null) {
        if (!_canvas) {
            _canvas = document.createElement("canvas");
            _canvas.width = 1000;
            _canvas.height = 650;
            document.body.appendChild(_canvas);
        }
        viewPort = new ƒ.Viewport();
        camera = createCamera();
        viewPort.initialize("viewport", node, camera.getComponent(ƒ.ComponentCamera), _canvas);
    }
    function createCamera(_translation = new ƒ.Vector3(1, 1, 10), _lookAt = new ƒ.Vector3()) {
        let camera = new ƒ.Node("Camera");
        let cmpTransform = new ƒ.ComponentTransform();
        cmpTransform.local.translate(_translation);
        cmpTransform.local.lookAt(_lookAt);
        camera.addComponent(cmpTransform);
        let cmpCamera = new ƒ.ComponentCamera();
        cmpCamera.projectCentral(1, 45, ƒ.FIELD_OF_VIEW.DIAGONAL);
        camera.addComponent(cmpCamera);
        return camera;
    }
    function createBroadleaf(_name, _clrTrunk, _clrTop, _pos, _scale) {
        let tree = new ƒ.Node(_name);
        let treeTrunk = createCompleteMeshNode("TreeTrunk", new ƒ.Material("TreeTrunk", ƒ.ShaderUniColor, new ƒ.CoatColored(_clrTrunk)), new ƒ.MeshCube);
        let cmpMeshTrunk = treeTrunk.getComponent(ƒ.ComponentMesh);
        cmpMeshTrunk.pivot.scale(_scale);
        cmpMeshTrunk.pivot.translateY(_scale.y / 2);
        let treeTop = createCompleteMeshNode("TreeTop", new ƒ.Material("TreeTop", ƒ.ShaderUniColor, new ƒ.CoatColored(_clrTop)), new ƒ.MeshCube);
        let cmpMeshTreeTop = treeTop.getComponent(ƒ.ComponentMesh);
        cmpMeshTreeTop.pivot.scale(new ƒ.Vector3((_scale.x * 2), (_scale.y * 3), (_scale.z * 2)));
        cmpMeshTreeTop.pivot.translateY(_scale.y * 1.5);
        tree.appendChild(treeTop);
        tree.appendChild(treeTrunk);
        tree.addComponent(new ƒ.ComponentTransform);
        tree.cmpTransform.local.translate(_pos);
        // Warum hat Transform mit cmpTransform einen shortcut und z.B. ein Mesh nicht?
        // Maybe weil jeder Node ein Transform hat, aber nicht jeder ein Mesh?
        return tree;
    }
    function createConifer(_name, _clrTrunk, _clrTop, _pos, _scale) {
        let tree = new ƒ.Node(_name);
        let treeTrunk = createCompleteMeshNode("TreeTrunk", new ƒ.Material("TreeTrunk", ƒ.ShaderUniColor, new ƒ.CoatColored(_clrTrunk)), new ƒ.MeshCube);
        let cmpMeshTrunk = treeTrunk.getComponent(ƒ.ComponentMesh);
        cmpMeshTrunk.pivot.scale(_scale);
        cmpMeshTrunk.pivot.translateY(_scale.y / 2);
        let treeTop = createCompleteMeshNode("TreeTop", new ƒ.Material("TreeTop", ƒ.ShaderUniColor, new ƒ.CoatColored(_clrTop)), new ƒ.MeshPyramid);
        let cmpMeshTreeTop = treeTop.getComponent(ƒ.ComponentMesh);
        cmpMeshTreeTop.pivot.scale(new ƒ.Vector3((_scale.x * 2), (_scale.y * 3), (_scale.z * 2)));
        cmpMeshTreeTop.pivot.translateY((_scale.y / 2));
        tree.appendChild(treeTop);
        tree.appendChild(treeTrunk);
        tree.addComponent(new ƒ.ComponentTransform);
        tree.cmpTransform.local.translate(_pos);
        return tree;
    }
    function createMushroom(_name, _clrTrunk, _clrCap, _pos, _scale) {
        let mushroom = new ƒ.Node(_name);
        let mushroomTrunk = createCompleteMeshNode("MushroomTrunk", new ƒ.Material("MushroomTrunk", ƒ.ShaderUniColor, new ƒ.CoatColored(_clrTrunk)), new ƒ.MeshCube);
        let cmpMesh = mushroomTrunk.getComponent(ƒ.ComponentMesh);
        cmpMesh.pivot.scale(_scale);
        cmpMesh.pivot.translateY(_scale.y / 2);
        let mushroomCap = createCompleteMeshNode("MushroomCapRed", new ƒ.Material("MushroomCapRed", ƒ.ShaderUniColor, new ƒ.CoatColored(_clrCap)), new ƒ.MeshCube);
        let cmpMeshCap = mushroomCap.getComponent(ƒ.ComponentMesh);
        cmpMeshCap.pivot.scale(new ƒ.Vector3((_scale.x * 2), (_scale.y - 0.05), (_scale.z * 2)));
        cmpMeshCap.pivot.translateY((_scale.y));
        mushroom.appendChild(mushroomCap);
        mushroom.appendChild(mushroomTrunk);
        mushroom.addComponent(new ƒ.ComponentTransform);
        mushroom.cmpTransform.local.translate(_pos);
        return mushroom;
    }
    function handleKeyDown(_event) {
        let keyPressed = _event.key;
        console.log(keyPressed);
        switch (keyPressed) {
            case "w":
                camera.cmpTransform.local.translateZ(1);
                break;
            case "s":
                camera.cmpTransform.local.translateZ(-1);
                break;
            case "a":
                camera.cmpTransform.local.translateX(1);
                break;
            case "d":
                camera.cmpTransform.local.translateX(-1);
                break;
            case "Shift":
                camera.cmpTransform.local.translateY(1);
                break;
            case "Control":
                camera.cmpTransform.local.translateY(-1);
                break;
            case "q":
                camera.cmpTransform.local.rotateZ(-1);
                break;
            case "e":
                camera.cmpTransform.local.rotateZ(1);
                break;
            case "ArrowUp":
                camera.cmpTransform.local.rotateX(-1);
                break;
            case "ArrowDown":
                camera.cmpTransform.local.rotateX(1);
                break;
            case "ArrowLeft":
                camera.cmpTransform.local.rotateY(1);
                break;
            case "ArrowRight":
                camera.cmpTransform.local.rotateY(-1);
                break;
        }
        viewPort.draw();
    }
})(ExampleSceneForest || (ExampleSceneForest = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlyc3RUZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZmlyc3RUZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxpREFBaUQ7QUFDakQsSUFBVSxrQkFBa0IsQ0E0TzNCO0FBN09ELGlEQUFpRDtBQUNqRCxXQUFVLGtCQUFrQjtJQUN4QixJQUFPLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBTyxZQUFZO0lBQ3hDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxrQkFBa0IsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUNsRCxJQUFJLElBQVksQ0FBQztJQUNqQixJQUFJLE1BQWMsQ0FBQztJQUNuQixJQUFJLFFBQW9CLENBQUM7SUFHekIsU0FBUyxJQUFJO1FBQ1QsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUM3QixZQUFZLEVBQUUsQ0FBQztRQUNmLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNoQixRQUFRLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDMUIsZ0JBQWdCLENBQUMsU0FBUyxFQUFFLGFBQWEsQ0FBQyxDQUFDO0lBQy9DLENBQUM7SUFFRCxTQUFTLFlBQVk7UUFDakIsSUFBSSxNQUFNLEdBQVcsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBRTFDLElBQUksV0FBVyxHQUFZLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUN6RCxJQUFJLFlBQVksR0FBWSxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDMUQsSUFBSSxjQUFjLEdBQVksSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQzFELElBQUkscUJBQXFCLEdBQVksSUFBSSxD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QUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDdEMsTUFBTTtZQUNWLEtBQUssV0FBVztnQkFDWixNQUFNLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3JDLE1BQU07WUFDVixLQUFLLFdBQVc7Z0JBQ1osTUFBTSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNyQyxNQUFNO1lBQ1YsS0FBSyxZQUFZO2dCQUNiLE1BQU0sQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUN0QyxNQUFNO1NBQ2I7UUFDRCxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDcEIsQ0FBQztBQUNMLENBQUMsRUE1T1Msa0JBQWtCLEtBQWxCLGtCQUFrQixRQTRPM0IiLCJzb3VyY2VzQ29udGVudCI6WyIvLy88cmVmZXJlbmNlIHR5cGVzPVwiLi4vRnVkZ2VDb3JlL0Z1ZGdlQ29yZS5qc1wiLz5cclxubmFtZXNwYWNlIEV4YW1wbGVTY2VuZUZvcmVzdCB7XHJcbiAgICBpbXBvcnQgxpIgPSBGdWRnZUNvcmU7ICAgICAgIC8vIEFsdCArIDE1OVxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGluaXQpO1xyXG4gICAgbGV0IG5vZGU6IMaSLk5vZGU7XHJcbiAgICBsZXQgY2FtZXJhOiDGki5Ob2RlO1xyXG4gICAgbGV0IHZpZXdQb3J0OiDGki5WaWV3cG9ydDtcclxuXHJcblxyXG4gICAgZnVuY3Rpb24gaW5pdCgpOiB2b2lkIHtcclxuICAgICAgICDGki5SZW5kZXJNYW5hZ2VyLmluaXRpYWxpemUoKTtcclxuICAgICAgICBjcmVhdGVGb3Jlc3QoKTtcclxuICAgICAgICB2aWV3UG9ydC5kcmF3KCk7XHJcbiAgICAgICAgdmlld1BvcnQuc2hvd1NjZW5lR3JhcGgoKTtcclxuICAgICAgICBhZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVLZXlEb3duKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVGb3Jlc3QoKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IGZvcmVzdDogxpIuTm9kZSA9IG5ldyDGki5Ob2RlKFwiRm9yZXN0XCIpO1xyXG5cclxuICAgICAgICBsZXQgY29sb3JMZWF2ZXM6IMaSLkNvbG9yID0gbmV3IMaSLkNvbG9yKDAuMiwgMC42LCAwLjMsIDEpO1xyXG4gICAgICAgIGxldCBjb2xvck5lZWRsZXM6IMaSLkNvbG9yID0gbmV3IMaSLkNvbG9yKDAuMSwgMC41LCAwLjMsIDEpO1xyXG4gICAgICAgIGxldCBjb2xvclRyZWVUcnVuazogxpIuQ29sb3IgPSBuZXcgxpIuQ29sb3IoMC41LCAwLjMsIDAsIDEpO1xyXG4gICAgICAgIGxldCBjb2xvck11c2hyb29tQ2FwQnJvd246IMaSLkNvbG9yID0gbmV3IMaSLkNvbG9yKDAuNiwgMC40LCAwLCAxKTtcclxuICAgICAgICBsZXQgY29sb3JNdXNocm9vbUNhcFJlZDogxpIuQ29sb3IgPSBuZXcgxpIuQ29sb3IoMC41LCAwLCAwLCAxKTtcclxuICAgICAgICBsZXQgY29sb3JNdXNocm9vbVRydW5rOiDGki5Db2xvciA9IG5ldyDGki5Db2xvcigwLjksIDAuOCwgMC43LCAxKTtcclxuICAgICAgICBsZXQgY29sb3JHcm91bmQ6IMaSLkNvbG9yID0gbmV3IMaSLkNvbG9yKDAuMywgMC42LCAwLjUsIDEpO1xyXG5cclxuICAgICAgICAvLyBsZXQgZ3JvdW5kUG9zaXRpb246IMaSLk1hdHJpeDR4NCA9IG5ldyDGki5NYXRyaXg0eDQoKTtcclxuICAgICAgICAvLyBncm91bmRQb3NpdGlvbi50cmFuc2xhdGVZKDIpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGdyb3VuZFBvc2l0aW9uKTtcclxuICAgICAgICBsZXQgZ3JvdW5kOiDGki5Ob2RlID0gY3JlYXRlQ29tcGxldGVNZXNoTm9kZShcIkdyb3VuZFwiLCBuZXcgxpIuTWF0ZXJpYWwoXCJHcm91bmRcIiwgxpIuU2hhZGVyVW5pQ29sb3IsIG5ldyDGki5Db2F0Q29sb3JlZChjb2xvckdyb3VuZCkpLCBuZXcgxpIuTWVzaEN1YmUoKSk7XHJcbiAgICAgICAgbGV0IGNtcEdyb3VuZE1lc2g6IMaSLkNvbXBvbmVudE1lc2ggPSBncm91bmQuZ2V0Q29tcG9uZW50KMaSLkNvbXBvbmVudE1lc2gpO1xyXG5cclxuICAgICAgICBjbXBHcm91bmRNZXNoLnBpdm90LnNjYWxlKG5ldyDGki5WZWN0b3IzKDguNSwgMC4wNSwgOC41KSk7XHJcbiAgICAgICAgbm9kZSA9IGdyb3VuZDtcclxuICAgICAgICBjcmVhdGVWaWV3cG9ydCgpO1xyXG5cclxuICAgICAgICAvLyBsZXQgY21wQ2FtZXJhOiDGki5Db21wb25lbnRUcmFuc2Zvcm0gPSBjYW1lcmEuZ2V0Q29tcG9uZW50KMaSLkNvbXBvbmVudFRyYW5zZm9ybSk7XHJcbiAgICAgICAgbGV0IGNtcFRyYW5zZm9ybUNhbWVyYTogxpIuQ29tcG9uZW50VHJhbnNmb3JtID0gY2FtZXJhLmNtcFRyYW5zZm9ybTtcclxuICAgICAgICBjbXBUcmFuc2Zvcm1DYW1lcmEubG9jYWwudHJhbnNsYXRlWSgyKTtcclxuICAgICAgICAvLyBjbXBDYW1lcmEubG9jYWwudHJhbnNsYXRlWigtMik7XHJcbiAgICAgICAgLy8gY21wVHJhbnNmb3JtQ2FtZXJhLmxvY2FsLnJvdGF0ZVgoOCk7XHJcbiAgICAgICAgLy8gY21wQ2FtZXJhLmxvY2FsLnJvdGF0ZVooMi44KTtcclxuICAgICAgICBub2RlLmFkZENoaWxkKGNhbWVyYSk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCA1OyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IHBsdXNPck1pbnVzOiBudW1iZXIgPSBNYXRoLnJhbmRvbSgpIDwgMC41ID8gLTEgOiAxO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcImNyZWF0ZSBCcm9hZGxlYWYgXCIgKyBpKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBicm9hZGxlYWZlOiDGki5Ob2RlID0gY3JlYXRlQnJvYWRsZWFmKFwiQnJlYWRMZWFmXCIgKyBpLCBjb2xvclRyZWVUcnVua1xyXG4gICAgICAgICAgICAgICAgLCBjb2xvckxlYXZlcywgbmV3IMaSLlZlY3RvcjMoTWF0aC5yYW5kb20oKSAqIDQgKiBwbHVzT3JNaW51cywgMC4yLFxyXG4gICAgICAgICAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgKiA0ICogcGx1c09yTWludXMpLCBuZXcgxpIuVmVjdG9yMygwLjIsIDAuNSwgMC4yKSk7XHJcbiAgICAgICAgICAgIGZvcmVzdC5hcHBlbmRDaGlsZChicm9hZGxlYWZlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IDc7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgcGx1c09yTWludXM6IG51bWJlciA9IE1hdGgucmFuZG9tKCkgPCAwLjUgPyAtMSA6IDE7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiY3JlYXRlIENvbmlmZXIgXCIgKyBpKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBjb25pZmVyOiDGki5Ob2RlID0gY3JlYXRlQ29uaWZlcihcIkNvbmlmZXJcIiArIGksIGNvbG9yVHJlZVRydW5rXHJcbiAgICAgICAgICAgICAgICAsIGNvbG9yTmVlZGxlcywgbmV3IMaSLlZlY3RvcjMoTWF0aC5yYW5kb20oKSAqIDMgKiBwbHVzT3JNaW51cywgMC4yLFxyXG4gICAgICAgICAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgKiAzICogcGx1c09yTWludXMpLCBuZXcgxpIuVmVjdG9yMygwLjIsIDAuNSwgMC4yKSk7XHJcbiAgICAgICAgICAgIGZvcmVzdC5hcHBlbmRDaGlsZChjb25pZmVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IDY7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgcGx1c09yTWludXM6IG51bWJlciA9IE1hdGgucmFuZG9tKCkgPCAwLjUgPyAtMSA6IDE7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiY3JlYXRlIE11c2hyb29tUmVkIFwiICsgaSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgbXVzaHJvb21SZWQ6IMaSLk5vZGUgPSBjcmVhdGVNdXNocm9vbShcIk11c2hyb29tXCIgKyBpLCBjb2xvck11c2hyb29tVHJ1bmtcclxuICAgICAgICAgICAgICAgICwgY29sb3JNdXNocm9vbUNhcFJlZCwgbmV3IMaSLlZlY3RvcjMoTWF0aC5yYW5kb20oKSAqIDIgKiBwbHVzT3JNaW51cywgMC4yLFxyXG4gICAgICAgICAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgKiAyICogcGx1c09yTWludXMpLCBuZXcgxpIuVmVjdG9yMygwLjEsIDAuMywgMC4xKSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgbXVzaHJvb21Ccm93bjogxpIuTm9kZSA9IGNyZWF0ZU11c2hyb29tKFwiTXVzaHJvb21cIiArIGksIGNvbG9yTXVzaHJvb21UcnVua1xyXG4gICAgICAgICAgICAgICAgLCBjb2xvck11c2hyb29tQ2FwQnJvd24sIG5ldyDGki5WZWN0b3IzKE1hdGgucmFuZG9tKCkgKiAyICogcGx1c09yTWludXMsIDAuMixcclxuICAgICAgICAgICAgICAgICAgICBNYXRoLnJhbmRvbSgpICogMiAqIHBsdXNPck1pbnVzKSwgbmV3IMaSLlZlY3RvcjMoMC4xNSwgMC40LCAwLjE1KSk7XHJcblxyXG4gICAgICAgICAgICBmb3Jlc3QuYXBwZW5kQ2hpbGQobXVzaHJvb21SZWQpO1xyXG4gICAgICAgICAgICBmb3Jlc3QuYXBwZW5kQ2hpbGQobXVzaHJvb21Ccm93bik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoZm9yZXN0KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVDb21wbGV0ZU1lc2hOb2RlKF9uYW1lOiBzdHJpbmcsIF9tYXRlcmlhbDogxpIuTWF0ZXJpYWwsIF9tZXNoOiDGki5NZXNoLCBfcG9zaXRpb24/OiDGki5NYXRyaXg0eDQpOiDGki5Ob2RlIHtcclxuICAgICAgICBsZXQgbm9kZTogxpIuTm9kZSA9IG5ldyDGki5Ob2RlKF9uYW1lKTtcclxuXHJcbiAgICAgICAgbGV0IGNtcE1lc2g6IMaSLkNvbXBvbmVudE1lc2ggPSBuZXcgxpIuQ29tcG9uZW50TWVzaChfbWVzaCk7XHJcbiAgICAgICAgbGV0IGNtcE1hdGVyaWFsOiDGki5Db21wb25lbnRNYXRlcmlhbCA9IG5ldyDGki5Db21wb25lbnRNYXRlcmlhbChfbWF0ZXJpYWwpO1xyXG5cclxuICAgICAgICBsZXQgY21wVHJhbnNmb3JtOiDGki5Db21wb25lbnRUcmFuc2Zvcm07XHJcbiAgICAgICAgaWYgKF9wb3NpdGlvbikge1xyXG5cclxuICAgICAgICAgICAgY21wVHJhbnNmb3JtID0gbmV3IMaSLkNvbXBvbmVudFRyYW5zZm9ybShfcG9zaXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY21wVHJhbnNmb3JtID0gbmV3IMaSLkNvbXBvbmVudFRyYW5zZm9ybSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBub2RlLmFkZENvbXBvbmVudChjbXBNZXNoKTtcclxuICAgICAgICBub2RlLmFkZENvbXBvbmVudChjbXBNYXRlcmlhbCk7XHJcbiAgICAgICAgbm9kZS5hZGRDb21wb25lbnQoY21wVHJhbnNmb3JtKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5vZGU7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlVmlld3BvcnQoX2NhbnZhczogSFRNTENhbnZhc0VsZW1lbnQgPSBudWxsKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCFfY2FudmFzKSB7XHJcbiAgICAgICAgICAgIF9jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgICAgICAgICBfY2FudmFzLndpZHRoID0gMTAwMDtcclxuICAgICAgICAgICAgX2NhbnZhcy5oZWlnaHQgPSA2NTA7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoX2NhbnZhcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZpZXdQb3J0ID0gbmV3IMaSLlZpZXdwb3J0KCk7XHJcbiAgICAgICAgY2FtZXJhID0gY3JlYXRlQ2FtZXJhKCk7XHJcbiAgICAgICAgdmlld1BvcnQuaW5pdGlhbGl6ZShcInZpZXdwb3J0XCIsIG5vZGUsIGNhbWVyYS5nZXRDb21wb25lbnQoxpIuQ29tcG9uZW50Q2FtZXJhKSwgX2NhbnZhcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlQ2FtZXJhKF90cmFuc2xhdGlvbjogxpIuVmVjdG9yMyA9IG5ldyDGki5WZWN0b3IzKDEsIDEsIDEwKSwgX2xvb2tBdDogxpIuVmVjdG9yMyA9IG5ldyDGki5WZWN0b3IzKCkpOiDGki5Ob2RlIHtcclxuICAgICAgICBsZXQgY2FtZXJhOiDGki5Ob2RlID0gbmV3IMaSLk5vZGUoXCJDYW1lcmFcIik7XHJcbiAgICAgICAgbGV0IGNtcFRyYW5zZm9ybTogxpIuQ29tcG9uZW50VHJhbnNmb3JtID0gbmV3IMaSLkNvbXBvbmVudFRyYW5zZm9ybSgpO1xyXG4gICAgICAgIGNtcFRyYW5zZm9ybS5sb2NhbC50cmFuc2xhdGUoX3RyYW5zbGF0aW9uKTtcclxuICAgICAgICBjbXBUcmFuc2Zvcm0ubG9jYWwubG9va0F0KF9sb29rQXQpO1xyXG4gICAgICAgIGNhbWVyYS5hZGRDb21wb25lbnQoY21wVHJhbnNmb3JtKTtcclxuXHJcbiAgICAgICAgbGV0IGNtcENhbWVyYTogxpIuQ29tcG9uZW50Q2FtZXJhID0gbmV3IMaSLkNvbXBvbmVudENhbWVyYSgpO1xyXG4gICAgICAgIGNtcENhbWVyYS5wcm9qZWN0Q2VudHJhbCgxLCA0NSwgxpIuRklFTERfT0ZfVklFVy5ESUFHT05BTCk7XHJcbiAgICAgICAgY2FtZXJhLmFkZENvbXBvbmVudChjbXBDYW1lcmEpO1xyXG5cclxuICAgICAgICByZXR1cm4gY2FtZXJhO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZUJyb2FkbGVhZihfbmFtZTogc3RyaW5nLCBfY2xyVHJ1bms6IMaSLkNvbG9yLCBfY2xyVG9wOiDGki5Db2xvciwgX3BvczogxpIuVmVjdG9yMywgX3NjYWxlOiDGki5WZWN0b3IzKTogxpIuTm9kZSB7XHJcbiAgICAgICAgbGV0IHRyZWU6IMaSLk5vZGUgPSBuZXcgxpIuTm9kZShfbmFtZSk7XHJcblxyXG4gICAgICAgIGxldCB0cmVlVHJ1bms6IMaSLk5vZGUgPSBjcmVhdGVDb21wbGV0ZU1lc2hOb2RlKFwiVHJlZVRydW5rXCIsIG5ldyDGki5NYXRlcmlhbChcIlRyZWVUcnVua1wiLCDGki5TaGFkZXJVbmlDb2xvciwgbmV3IMaSLkNvYXRDb2xvcmVkKF9jbHJUcnVuaykpLCBuZXcgxpIuTWVzaEN1YmUpO1xyXG5cclxuICAgICAgICBsZXQgY21wTWVzaFRydW5rOiDGki5Db21wb25lbnRNZXNoID0gdHJlZVRydW5rLmdldENvbXBvbmVudCjGki5Db21wb25lbnRNZXNoKTtcclxuICAgICAgICBjbXBNZXNoVHJ1bmsucGl2b3Quc2NhbGUoX3NjYWxlKTtcclxuICAgICAgICBjbXBNZXNoVHJ1bmsucGl2b3QudHJhbnNsYXRlWShfc2NhbGUueSAvIDIpO1xyXG5cclxuICAgICAgICBsZXQgdHJlZVRvcDogxpIuTm9kZSA9IGNyZWF0ZUNvbXBsZXRlTWVzaE5vZGUoXCJUcmVlVG9wXCIsIG5ldyDGki5NYXRlcmlhbChcIlRyZWVUb3BcIiwgxpIuU2hhZGVyVW5pQ29sb3IsIG5ldyDGki5Db2F0Q29sb3JlZChfY2xyVG9wKSksIG5ldyDGki5NZXNoQ3ViZSk7XHJcblxyXG4gICAgICAgIGxldCBjbXBNZXNoVHJlZVRvcDogxpIuQ29tcG9uZW50TWVzaCA9IHRyZWVUb3AuZ2V0Q29tcG9uZW50KMaSLkNvbXBvbmVudE1lc2gpO1xyXG4gICAgICAgIGNtcE1lc2hUcmVlVG9wLnBpdm90LnNjYWxlKG5ldyDGki5WZWN0b3IzKChfc2NhbGUueCAqIDIpLCAoX3NjYWxlLnkgKiAzKSwgKF9zY2FsZS56ICogMikpKTtcclxuICAgICAgICBjbXBNZXNoVHJlZVRvcC5waXZvdC50cmFuc2xhdGVZKF9zY2FsZS55ICogMS41KTtcclxuXHJcbiAgICAgICAgdHJlZS5hcHBlbmRDaGlsZCh0cmVlVG9wKTtcclxuICAgICAgICB0cmVlLmFwcGVuZENoaWxkKHRyZWVUcnVuayk7XHJcbiAgICAgICAgdHJlZS5hZGRDb21wb25lbnQobmV3IMaSLkNvbXBvbmVudFRyYW5zZm9ybSk7XHJcbiAgICAgICAgdHJlZS5jbXBUcmFuc2Zvcm0ubG9jYWwudHJhbnNsYXRlKF9wb3MpO1xyXG4gICAgICAgIC8vIFdhcnVtIGhhdCBUcmFuc2Zvcm0gbWl0IGNtcFRyYW5zZm9ybSBlaW5lbiBzaG9ydGN1dCB1bmQgei5CLiBlaW4gTWVzaCBuaWNodD9cclxuICAgICAgICAvLyBNYXliZSB3ZWlsIGplZGVyIE5vZGUgZWluIFRyYW5zZm9ybSBoYXQsIGFiZXIgbmljaHQgamVkZXIgZWluIE1lc2g/XHJcblxyXG4gICAgICAgIHJldHVybiB0cmVlO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZUNvbmlmZXIoX25hbWU6IHN0cmluZywgX2NsclRydW5rOiDGki5Db2xvciwgX2NsclRvcDogxpIuQ29sb3IsIF9wb3M6IMaSLlZlY3RvcjMsIF9zY2FsZTogxpIuVmVjdG9yMyk6IMaSLk5vZGUge1xyXG4gICAgICAgIGxldCB0cmVlOiDGki5Ob2RlID0gbmV3IMaSLk5vZGUoX25hbWUpO1xyXG4gICAgICAgIGxldCB0cmVlVHJ1bms6IMaSLk5vZGUgPSBjcmVhdGVDb21wbGV0ZU1lc2hOb2RlKFwiVHJlZVRydW5rXCIsIG5ldyDGki5NYXRlcmlhbChcIlRyZWVUcnVua1wiLCDGki5TaGFkZXJVbmlDb2xvciwgbmV3IMaSLkNvYXRDb2xvcmVkKF9jbHJUcnVuaykpLCBuZXcgxpIuTWVzaEN1YmUpO1xyXG4gICAgICAgIGxldCBjbXBNZXNoVHJ1bms6IMaSLkNvbXBvbmVudE1lc2ggPSB0cmVlVHJ1bmsuZ2V0Q29tcG9uZW50KMaSLkNvbXBvbmVudE1lc2gpO1xyXG4gICAgICAgIGNtcE1lc2hUcnVuay5waXZvdC5zY2FsZShfc2NhbGUpO1xyXG4gICAgICAgIGNtcE1lc2hUcnVuay5waXZvdC50cmFuc2xhdGVZKF9zY2FsZS55IC8gMik7XHJcblxyXG4gICAgICAgIGxldCB0cmVlVG9wOiDGki5Ob2RlID0gY3JlYXRlQ29tcGxldGVNZXNoTm9kZShcIlRyZWVUb3BcIiwgbmV3IMaSLk1hdGVyaWFsKFwiVHJlZVRvcFwiLCDGki5TaGFkZXJVbmlDb2xvciwgbmV3IMaSLkNvYXRDb2xvcmVkKF9jbHJUb3ApKSwgbmV3IMaSLk1lc2hQeXJhbWlkKTtcclxuICAgICAgICBsZXQgY21wTWVzaFRyZWVUb3A6IMaSLkNvbXBvbmVudE1lc2ggPSB0cmVlVG9wLmdldENvbXBvbmVudCjGki5Db21wb25lbnRNZXNoKTtcclxuICAgICAgICBjbXBNZXNoVHJlZVRvcC5waXZvdC5zY2FsZShuZXcgxpIuVmVjdG9yMygoX3NjYWxlLnggKiAyKSwgKF9zY2FsZS55ICogMyksIChfc2NhbGUueiAqIDIpKSk7XHJcbiAgICAgICAgY21wTWVzaFRyZWVUb3AucGl2b3QudHJhbnNsYXRlWSgoX3NjYWxlLnkgLyAyKSk7XHJcblxyXG4gICAgICAgIHRyZWUuYXBwZW5kQ2hpbGQodHJlZVRvcCk7XHJcbiAgICAgICAgdHJlZS5hcHBlbmRDaGlsZCh0cmVlVHJ1bmspO1xyXG5cclxuICAgICAgICB0cmVlLmFkZENvbXBvbmVudChuZXcgxpIuQ29tcG9uZW50VHJhbnNmb3JtKTtcclxuICAgICAgICB0cmVlLmNtcFRyYW5zZm9ybS5sb2NhbC50cmFuc2xhdGUoX3Bvcyk7XHJcblxyXG4gICAgICAgIHJldHVybiB0cmVlO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZU11c2hyb29tKF9uYW1lOiBzdHJpbmcsIF9jbHJUcnVuazogxpIuQ29sb3IsIF9jbHJDYXA6IMaSLkNvbG9yLCBfcG9zOiDGki5WZWN0b3IzLCBfc2NhbGU6IMaSLlZlY3RvcjMpOiDGki5Ob2RlIHtcclxuICAgICAgICBsZXQgbXVzaHJvb206IMaSLk5vZGUgPSBuZXcgxpIuTm9kZShfbmFtZSk7XHJcbiAgICAgICAgbGV0IG11c2hyb29tVHJ1bms6IMaSLk5vZGUgPSBjcmVhdGVDb21wbGV0ZU1lc2hOb2RlKFwiTXVzaHJvb21UcnVua1wiLCBuZXcgxpIuTWF0ZXJpYWwoXCJNdXNocm9vbVRydW5rXCIsIMaSLlNoYWRlclVuaUNvbG9yLCBuZXcgxpIuQ29hdENvbG9yZWQoX2NsclRydW5rKSksIG5ldyDGki5NZXNoQ3ViZSk7XHJcbiAgICAgICAgbGV0IGNtcE1lc2g6IMaSLkNvbXBvbmVudE1lc2ggPSBtdXNocm9vbVRydW5rLmdldENvbXBvbmVudCjGki5Db21wb25lbnRNZXNoKTtcclxuICAgICAgICBjbXBNZXNoLnBpdm90LnNjYWxlKF9zY2FsZSk7IGNtcE1lc2gucGl2b3QudHJhbnNsYXRlWShfc2NhbGUueSAvIDIpO1xyXG5cclxuICAgICAgICBsZXQgbXVzaHJvb21DYXA6IMaSLk5vZGUgPSBjcmVhdGVDb21wbGV0ZU1lc2hOb2RlKFwiTXVzaHJvb21DYXBSZWRcIiwgbmV3IMaSLk1hdGVyaWFsKFwiTXVzaHJvb21DYXBSZWRcIiwgxpIuU2hhZGVyVW5pQ29sb3IsIG5ldyDGki5Db2F0Q29sb3JlZChfY2xyQ2FwKSksIG5ldyDGki5NZXNoQ3ViZSk7XHJcbiAgICAgICAgbGV0IGNtcE1lc2hDYXA6IMaSLkNvbXBvbmVudE1lc2ggPSBtdXNocm9vbUNhcC5nZXRDb21wb25lbnQoxpIuQ29tcG9uZW50TWVzaCk7IGNtcE1lc2hDYXAucGl2b3Quc2NhbGUobmV3IMaSLlZlY3RvcjMoKF9zY2FsZS54ICogMiksIChfc2NhbGUueSAtIDAuMDUpLCAoX3NjYWxlLnogKiAyKSkpO1xyXG4gICAgICAgIGNtcE1lc2hDYXAucGl2b3QudHJhbnNsYXRlWSgoX3NjYWxlLnkpKTtcclxuXHJcbiAgICAgICAgbXVzaHJvb20uYXBwZW5kQ2hpbGQobXVzaHJvb21DYXApO1xyXG4gICAgICAgIG11c2hyb29tLmFwcGVuZENoaWxkKG11c2hyb29tVHJ1bmspO1xyXG4gICAgICAgIG11c2hyb29tLmFkZENvbXBvbmVudChuZXcgxpIuQ29tcG9uZW50VHJhbnNmb3JtKTtcclxuICAgICAgICBtdXNocm9vbS5jbXBUcmFuc2Zvcm0ubG9jYWwudHJhbnNsYXRlKF9wb3MpO1xyXG5cclxuICAgICAgICByZXR1cm4gbXVzaHJvb207XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaGFuZGxlS2V5RG93bihfZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICBsZXQga2V5UHJlc3NlZDogc3RyaW5nID0gX2V2ZW50LmtleTtcclxuICAgICAgICBjb25zb2xlLmxvZyhrZXlQcmVzc2VkKTtcclxuXHJcbiAgICAgICAgc3dpdGNoIChrZXlQcmVzc2VkKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJ3XCI6XHJcbiAgICAgICAgICAgICAgICBjYW1lcmEuY21wVHJhbnNmb3JtLmxvY2FsLnRyYW5zbGF0ZVooMSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInNcIjpcclxuICAgICAgICAgICAgICAgIGNhbWVyYS5jbXBUcmFuc2Zvcm0ubG9jYWwudHJhbnNsYXRlWigtMSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImFcIjpcclxuICAgICAgICAgICAgICAgIGNhbWVyYS5jbXBUcmFuc2Zvcm0ubG9jYWwudHJhbnNsYXRlWCgxKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiZFwiOlxyXG4gICAgICAgICAgICAgICAgY2FtZXJhLmNtcFRyYW5zZm9ybS5sb2NhbC50cmFuc2xhdGVYKC0xKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiU2hpZnRcIjpcclxuICAgICAgICAgICAgICAgIGNhbWVyYS5jbXBUcmFuc2Zvcm0ubG9jYWwudHJhbnNsYXRlWSgxKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiQ29udHJvbFwiOlxyXG4gICAgICAgICAgICAgICAgY2FtZXJhLmNtcFRyYW5zZm9ybS5sb2NhbC50cmFuc2xhdGVZKC0xKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwicVwiOlxyXG4gICAgICAgICAgICAgICAgY2FtZXJhLmNtcFRyYW5zZm9ybS5sb2NhbC5yb3RhdGVaKC0xKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiZVwiOlxyXG4gICAgICAgICAgICAgICAgY2FtZXJhLmNtcFRyYW5zZm9ybS5sb2NhbC5yb3RhdGVaKDEpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJBcnJvd1VwXCI6XHJcbiAgICAgICAgICAgICAgICBjYW1lcmEuY21wVHJhbnNmb3JtLmxvY2FsLnJvdGF0ZVgoLTEpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJBcnJvd0Rvd25cIjpcclxuICAgICAgICAgICAgICAgIGNhbWVyYS5jbXBUcmFuc2Zvcm0ubG9jYWwucm90YXRlWCgxKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiQXJyb3dMZWZ0XCI6XHJcbiAgICAgICAgICAgICAgICBjYW1lcmEuY21wVHJhbnNmb3JtLmxvY2FsLnJvdGF0ZVkoMSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIkFycm93UmlnaHRcIjpcclxuICAgICAgICAgICAgICAgIGNhbWVyYS5jbXBUcmFuc2Zvcm0ubG9jYWwucm90YXRlWSgtMSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgdmlld1BvcnQuZHJhdygpO1xyXG4gICAgfVxyXG59Il19